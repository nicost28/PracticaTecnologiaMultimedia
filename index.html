<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Mallorca Asi√°tico</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin="" />
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js" integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>


  <!-- Favicons -->
  <link href="assets/img/mallorcaAsiatico.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Satisfy:wght@400&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="assets/css/main.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Delicious
  * Template URL: https://bootstrapmade.com/delicious-free-restaurant-bootstrap-theme/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body class="index-page">

  <header id="header" class="header fixed-top">

    <div class="branding d-flex align-items-cente">

      <div class="container position-relative d-flex align-items-center justify-content-between">
        <a href="index.html" class="logo d-flex align-items-center">
          <!-- Uncomment the line below if you also wish to use an image logo -->
          <img src="assets/img/mallorcaAsiatico.png" alt="">
        </a>

        <nav id="navmenu" class="navmenu">
          <ul>
            <li><a href="#hero" class="active">Home</a></li>
            <li><a href="login.html">Iniciar Sesi√≥n</a></li>

            <!-- Bot√≥n Mapa - Enlaza a la secci√≥n del mapa -->
            <li><a href="#why-us">Mapa</a></li>
            <!-- Bot√≥n Lista Restaurantes - Enlaza a la secci√≥n de restaurantes -->
            <li><a href="#restaurantes">Lista Restaurantes</a></li>
            </li>
          </ul>
          <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
        </nav>

      </div>

    </div>

  </header>

  <main class="main">

    <!-- Hero Section -->
    <section id="hero" class="hero section dark-background">

      <div id="hero-carousel" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="5000">
    
        <div class="carousel-item active">
          <img src="assets/img/hero-carousel/asiatico-carrusel1.jpg" alt="">
          <div class="carousel-container">
            <h2><span>Mallorca</span> Asi√°tico</h2>
          </div>
        </div><!-- End Carousel Item -->
    
        <div class="carousel-item">
          <img src="assets/img/hero-carousel/hero-carousel-1.jpg" alt="">
          <div class="carousel-container">
            <h2><span>Mallorca</span> Asi√°tico</h2>
          </div>
        </div><!-- End Carousel Item -->
    
        <div class="carousel-item">
          <img src="assets/img/hero-carousel/hero-carousel-2.jpg" alt="">
          <div class="carousel-container">
            <h2><span>Mallorca</span> Asi√°tico</h2>
          </div>
        </div><!-- End Carousel Item -->
    
        <a class="carousel-control-prev" href="#hero-carousel" role="button" data-bs-slide="prev">
          <span class="carousel-control-prev-icon bi bi-chevron-left" aria-hidden="true"></span>
        </a>
    
        <a class="carousel-control-next" href="#hero-carousel" role="button" data-bs-slide="next">
          <span class="carousel-control-next-icon bi bi-chevron-right" aria-hidden="true"></span>
        </a>
    
        <ol class="carousel-indicators"></ol>
    
        <!-- Video superpuesto -->
        <div class="video-overlay">
          <video class="hero-video" autoplay muted playsinline loop controls>
            <source src="assets/img/hero-videos/video1.mp4" type="video/mp4">
            <source src="assets/img/hero-videos/video2.mp4" type="video/mp4">

          </video>
        </div>
    
      </div>
    
    </section>

    </section><!-- /Hero Section -->


    

    


<!-- Why Us Section Actualizada -->
<section id="why-us" class="why-us section">

  <!-- T√≠tulo -->
  <!-- T√≠tulo -->
<div class="container section-title" data-aos="fade-up">
  <h2>
    <span class="palabra-izq">Mapa de</span>
    <span class="palabra-der">Restaurantes</span>
  </h2>
</div>

  <!-- Contenedor del Mapa -->
  <div id="mi_mapa" style="width: 90%; height: 600px; margin: 20px auto; border-radius: 15px;"></div>

  <!-- Scripts del Mapa -->
  <script>
    // Variables globales
    const ORS_API_KEY = '5b3ce3597851110001cf6248e49a52899cc74f529a099cb78fdb53b0';
    const defaultCoords = [39.64213, 2.97582];
    const dragonSushiCoords = [39.57447, 2.64801];
    let map, userMarker, routeLayer;

    // Inicializaci√≥n del mapa
    function initMap(coords = defaultCoords) {
      if(map) map.remove();
      
      map = L.map('mi_mapa').setView(coords, 12);
      
      // Capa base
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      
      // Marcador Dragon Sushi
      L.marker(dragonSushiCoords)
        .addTo(map)
        .bindPopup(`
          <b>Dragon Sushi</b><br>
          <button onclick="calculateRoute()" class="btn-route">
            üöó Calcular ruta
          </button>
        `)
        .openPopup();
    }

    // Funci√≥n para solicitar ubicaci√≥n
    function requestLocation() {
  if(navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      position => {
        const userCoords = [
          position.coords.latitude, 
          position.coords.longitude
        ];
        
        console.log('Coordenadas reales obtenidas:', userCoords);
        
        // Guardar en localStorage
        localStorage.setItem('userLocation', JSON.stringify(userCoords));
        
        // Si el mapa ya existe
        if(map) {
          // Solo actualizar posici√≥n y a√±adir marcador
          map.setView(userCoords, 16);
          
          // Eliminar marcador anterior si existe
          if(userMarker) map.removeLayer(userMarker);
          
          userMarker = L.marker(userCoords)
            .addTo(map)
            .bindPopup('<b>Tu ubicaci√≥n actual</b>')
            .openPopup();
            
        } else {
          // Si el mapa no existe, inicializarlo
          initMap(userCoords);
          map.setView(userCoords, 16);
        }
      },
      error => {
        console.error('Error de geolocalizaci√≥n:', error);
        if(!map) initMap();
        alert('¬°Permiso necesario para geolocalizaci√≥n!');
      },
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      }
    );
  } else {
    alert('Tu navegador no soporta geolocalizaci√≥n');
    if(!map) initMap();
  }
}



    // Calcular ruta (usando OpenRouteService)
    async function calculateRoute() {
  try {
    // 1. Verificar ubicaci√≥n guardada
    const userCoords = JSON.parse(localStorage.getItem('userLocation'));
    if (!userCoords) {
      alert('Primero activa tu ubicaci√≥n desde el bot√≥n "üó∫Ô∏è Activar mi ubicaci√≥n"');
      return;
    }

    // 2. Validar formato de coordenadas (lon,lat)
    const start = `${userCoords[1]},${userCoords[0]}`; // Formato correcto: longitud,latitud
    const end = `${dragonSushiCoords[1]},${dragonSushiCoords[0]}`;

    // 3. Construir URL con API key v√°lida
    const url = `https://api.openrouteservice.org/v2/directions/driving-car?api_key=${ORS_API_KEY}&start=${start}&end=${end}`;

    // 4. Hacer petici√≥n con manejo CORS
    const response = await fetch(url, {
      mode: 'cors', // Necesario para evitar bloqueos del navegador
      headers: {
        'Accept': 'application/json, application/geo+json'
      }
    });

    // 5. Verificar respuesta HTTP
    if (!response.ok) {
      const errorData = await response.json();
      throw new Error(`API Error ${response.status}: ${errorData.error?.message || 'Error desconocido'}`);
    }

    // 6. Procesar datos de la ruta
    const data = await response.json();
    if (!data.features?.length) throw new Error('No se encontraron rutas');

    // 7. Dibujar ruta en el mapa
    if (routeLayer) map.removeLayer(routeLayer);
    routeLayer = L.geoJSON(data.features[0], {
      style: {color: '#FF6B6B', weight: 5}
    }).addTo(map);

    // 8. Ajustar vista del mapa
    map.fitBounds(routeLayer.getBounds());

  } catch (error) {
    console.error('Error completo:', error);
    alert(`üö® Error cr√≠tico: ${error.message}`);
    // Opcional: Mostrar detalles t√©cnicos en consola
  }
}

    // Evento al cargar la p√°gina
    document.addEventListener('DOMContentLoaded', () => {
      initMap();
      requestLocation(); // Intenta geolocalizaci√≥n autom√°ticamente
    });
  </script>

</section>





    <!-- Secci√≥n de Restaurantes -->
<section id="restaurantes" class="restaurantes section">

  <!-- T√≠tulo de la Secci√≥n -->
  <div class="container section-title" data-aos="fade-up">
    
    <div><span>Nuestra Recomendacion</div>
  </div>

  <div class="container">
    <div class="row justify-content-center" id="restaurante-container" data-aos="fade-up" data-aos-delay="100">
      <!-- Contenido din√°mico -->
      <div class="col-lg-8">
        <div class="card mb-4">
          <div class="card-body">
            <h3 class="card-title">Cargando informaci√≥n...</h3>
            <div class="spinner-border" role="status"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

</section>

<script>



// Cargar y mostrar el primer restaurante
async function cargarRestaurante() {
  try {
    const response = await fetch('RESTAURANTES_ASIA.json');
    const data = await response.json();
    const restaurante = data.restaurants[0];
    
    const html = `
      <div class="col-lg-10">
        <div class="card mb-4 restaurant-card d-flex flex-row">
          <div class="card-body flex-grow-1" style="margin-right: 50px;">
            <h3 class="card-title">${restaurante.name}</h3>
            <div class="restaurant-info">
              <p class="mb-1">
                <i class="bi bi-geo-alt"></i> 
                ${restaurante.address.streetAddress}, 
                ${restaurante.address.postalCode} 
                ${restaurante.address.addressLocality}
              </p>
              <p class="mb-1">
                <i class="bi bi-telephone"></i> 
                <a href="tel:${restaurante.telephone}">${restaurante.telephone}</a>
              </p>
              <div class="d-flex gap-2 mt-3">
                <a href="${restaurante.url}" target="_blank" class="btn btn-primary">
                  Visitar Sitio Web
                </a>
                <a href="#testimonials" class="btn btn-outline-primary">
                  Ver Rese√±as
                </a>
              </div>
            </div>
          </div>
          <div class="image-container" style="flex-shrink: 0; width: 300px;">
            <img src="assets/img/restaurantes/dragonSushi.png" 
                 class="h-100 w-100 object-fit-cover"
                 alt="${restaurante.name}">
          </div>
        </div>
      </div>
    `;
    
    document.getElementById('restaurante-container').innerHTML = html;
    
  } catch (error) {
    document.getElementById('restaurante-container').innerHTML = `
      <div class="col-lg-8">
        <div class="alert alert-danger">Error cargando el restaurante</div>
      </div>
    `;
  }
}

// Cargar al iniciar
document.addEventListener('DOMContentLoaded', cargarRestaurante);
</script>



   

    <!-- Testimonials Section -->
    <section id="testimonials" class="testimonials section dark-background">

      <img src="assets/img/testimonials-bg.jpg" class="testimonials-bg" alt="">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <div class="swiper init-swiper">
          <script type="application/json" class="swiper-config">
            {
              "loop": true,
              "speed": 600,
              "autoplay": {
                "delay": 5000
              },
              "slidesPerView": "auto",
              "pagination": {
                "el": ".swiper-pagination",
                "type": "bullets",
                "clickable": true
              }
            }
          </script>
          <div class="swiper-wrapper">

            <div class="swiper-slide">
              <div class="testimonial-item">
                <img src="assets/img/testimonials/testimonials-1.jpg" class="testimonial-img" alt="">
                <h3>Saul Goodman</h3>
                <div class="stars">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>Sushi fresco y delicioso, con un ambiente acogedor. ¬°Volver√© sin duda!</span>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <img src="assets/img/testimonials/testimonials-2.jpg" class="testimonial-img" alt="">
                <h3>Sara Wilsson</h3>
                
                <div class="stars">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>Calidad excelente, pero las raciones algo peque√±as para el precio.</span>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <img src="assets/img/testimonials/testimonials-3.jpg" class="testimonial-img" alt="">
                <h3>Jena Karlis</h3>
                <div class="stars">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>Sushi correcto, aunque he probado mejores en la isla.</span>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <img src="assets/img/testimonials/testimonials-4.jpg" class="testimonial-img" alt="">
                <h3>Matt Brandon</h3>
                <div class="stars">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>El personal fue s√∫per amable y nos recomendaron platos espectaculares.</span>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

            <div class="swiper-slide">
              <div class="testimonial-item">
                <img src="assets/img/testimonials/testimonials-5.jpg" class="testimonial-img" alt="">
                <h3>John Larson</h3>
                <div class="stars">
                  <i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i><i class="bi bi-star-fill"></i>
                </div>
                <p>
                  <i class="bi bi-quote quote-icon-left"></i>
                  <span>Gran variedad de sushi y un sake espectacular. Perfecto para una cena especial</span>
                  <i class="bi bi-quote quote-icon-right"></i>
                </p>
              </div>
            </div><!-- End testimonial item -->

          </div>
          <div class="swiper-pagination"></div>
        </div>

      </div>

    </section><!-- /Testimonials Section -->

    

  </main>

  <footer id="footer" class="footer dark-background">

    <div class="container copyright text-center mt-4">
      <p>¬© <span>Copyright</span> <strong class="px-1 sitename">Delicious</strong> <span>All Rights Reserved</span></p>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>

  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

  <!-- Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>